.\" -*- mode: troff; coding: utf-8 -*-
.\" Automatically generated by Pod::Man 5.0102 (Pod::Simple 3.45)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" \*(C` and \*(C' are quotes in nroff, nothing in troff, for use with C<>.
.ie n \{\
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "Internals 3"
.TH Internals 3 2024-04-16 "perl v5.40.0" "Perl Programmers Reference Guide"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH NAME
Internals \- Reserved special namespace for internals related functions
.SH SYNOPSIS
.IX Header "SYNOPSIS"
.Vb 4
\&    $is_ro= Internals::SvREADONLY($x)
\&    $refcnt= Internals::SvREFCNT($x)
\&    hv_clear_placeholders(%hash);
\&    if (Internals::stack_refcounted & 1) { .... }
.Ve
.SH DESCRIPTION
.IX Header "DESCRIPTION"
The Internals namespace is used by the core Perl development team to
expose certain low level internals routines for testing and other purposes.
.PP
In theory these routines were not and are not intended to be used outside
of the perl core, and are subject to change and removal at any time.
.PP
In practice people have come to depend on these over the years, despite
being historically undocumented, so we will provide some level of
forward compatibility for some time. Nevertheless you can assume that any
routine documented here is experimental or deprecated and you should find
alternatives to their use.
.SS FUNCTIONS
.IX Subsection "FUNCTIONS"
.ie n .IP "SvREFCNT(THING [, $value])" 4
.el .IP "SvREFCNT(THING [, \f(CW$value\fR])" 4
.IX Item "SvREFCNT(THING [, $value])"
Historically Perl has been a refcounted language. This means that each
variable tracks how many things reference it, and when the variable is no
longer referenced it will automatically free itself. In theory Perl code
should not have to care about this, and in a future version Perl might
change to some other strategy, although in practice this is unlikely.
.Sp
This function allows one to violate the abstraction of variables and get
or set the refcount of a variable, and in generally is really only useful
in code that is testing refcount behavior.
.Sp
*NOTE* You are strongly discouraged from using this function in non-test
code and especially discouraged from using the set form of this function.
The results of doing so may result in segmentation faults or other undefined
behavior.
.ie n .IP "SvREADONLY(THING, [, $value])" 4
.el .IP "SvREADONLY(THING, [, \f(CW$value\fR])" 4
.IX Item "SvREADONLY(THING, [, $value])"
Set or get whether a variable is readonly or not. Exactly what the
readonly flag means depend on the type of the variable affected and the
version of perl used.
.Sp
You are strongly discouraged from using this function directly. It is used
by various core modules, like \f(CW\*(C`Hash::Util\*(C'\fR, and the \f(CW\*(C`constant\*(C'\fR pragma
to implement higher-level behavior which should be used instead.
.Sp
See the core implementation for the exact meaning of the readonly flag for
each internal variable type.
.IP hv_clear_placeholders(%hash) 4
.IX Item "hv_clear_placeholders(%hash)"
Clear any placeholders from a locked hash. Should not be used directly.
You should use the wrapper functions provided by Hash::Util instead.
As of 5.25 also available as \f(CW Hash::Util::_clear_placeholders(%hash) \fR
.IP stack_refcounted 4
.IX Item "stack_refcounted"
Returns an integer indicating whether the perl binary has been configured
and built with an argument stack which reference-counts any items pushed
onto it. The value should be treated as flag bits. Currently only bit 0 is
used, indicating that \f(CW\*(C`PERL_RC_STACK\*(C'\fR was enabled during the build.
.SH AUTHOR
.IX Header "AUTHOR"
Perl core development team.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
perlguts
Hash::Util
constant
universal.c
