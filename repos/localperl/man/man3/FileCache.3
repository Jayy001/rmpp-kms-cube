.\" -*- mode: troff; coding: utf-8 -*-
.\" Automatically generated by Pod::Man 5.0102 (Pod::Simple 3.45)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" \*(C` and \*(C' are quotes in nroff, nothing in troff, for use with C<>.
.ie n \{\
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "FileCache 3"
.TH FileCache 3 2024-02-27 "perl v5.40.0" "Perl Programmers Reference Guide"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH NAME
FileCache \- keep more files open than the system permits
.SH SYNOPSIS
.IX Header "SYNOPSIS"
.Vb 1
\&    no strict \*(Aqrefs\*(Aq;
\&
\&    use FileCache;
\&    # or
\&    use FileCache maxopen => 16;
\&
\&    cacheout $mode, $path;
\&    # or
\&    cacheout $path;
\&    print $path @data;
\&
\&    $fh = cacheout $mode, $path;
\&    # or
\&    $fh = cacheout $path;
\&    print $fh @data;
.Ve
.SH DESCRIPTION
.IX Header "DESCRIPTION"
The \f(CW\*(C`cacheout\*(C'\fR function will make sure that there's a filehandle open
for reading or writing available as the pathname you give it. It
automatically closes and re-opens files if you exceed your system's
maximum number of file descriptors, or the suggested maximum \fImaxopen\fR.
.IP "cacheout EXPR" 4
.IX Item "cacheout EXPR"
The 1\-argument form of cacheout will open a file for writing (\f(CW\*(Aq>\*(Aq\fR)
on it's first use, and appending (\f(CW\*(Aq>>\*(Aq\fR) thereafter.
.Sp
Returns EXPR on success for convenience. You may neglect the
return value and manipulate EXPR as the filehandle directly if you prefer.
.IP "cacheout MODE, EXPR" 4
.IX Item "cacheout MODE, EXPR"
The 2\-argument form of cacheout will use the supplied mode for the initial
and subsequent openings. Most valid modes for 3\-argument \f(CW\*(C`open\*(C'\fR are supported
namely; \f(CW\*(Aq>\*(Aq\fR, \f(CW\*(Aq+>\*(Aq\fR, \f(CW\*(Aq<\*(Aq\fR, \f(CW\*(Aq<+\*(Aq\fR, \f(CW\*(Aq>>\*(Aq\fR,
\&\f(CW \*(Aq|\-\*(Aq \fR and \f(CW \*(Aq\-|\*(Aq \fR
.Sp
To pass supplemental arguments to a program opened with \f(CW \*(Aq|\-\*(Aq \fR or \f(CW \*(Aq\-|\*(Aq \fR
append them to the command string as you would system EXPR.
.Sp
Returns EXPR on success for convenience. You may neglect the
return value and manipulate EXPR as the filehandle directly if you prefer.
.SH CAVEATS
.IX Header "CAVEATS"
While it is permissible to \f(CW\*(C`close\*(C'\fR a FileCache managed file,
do not do so if you are calling \f(CW\*(C`FileCache::cacheout\*(C'\fR from a package other
than which it was imported, or with another module which overrides \f(CW\*(C`close\*(C'\fR.
If you must, use \f(CW\*(C`FileCache::cacheout_close\*(C'\fR.
.PP
Although FileCache can be used with piped opens ('\-|' or '|\-') doing so is
strongly discouraged.  If FileCache finds it necessary to close and then reopen
a pipe, the command at the far end of the pipe will be reexecuted \- the results
of performing IO on FileCache'd pipes is unlikely to be what you expect.  The
ability to use FileCache on pipes may be removed in a future release.
.PP
FileCache does not store the current file offset if it finds it necessary to
close a file.  When the file is reopened, the offset will be as specified by the
original \f(CW\*(C`open\*(C'\fR file mode.  This could be construed to be a bug.
.PP
The module functionality relies on symbolic references, so things will break
under 'use strict' unless 'no strict "refs"' is also specified.
.SH BUGS
.IX Header "BUGS"
\&\fIsys/param.h\fR lies with its \f(CW\*(C`NOFILE\*(C'\fR define on some systems,
so you may have to set \fImaxopen\fR yourself.
